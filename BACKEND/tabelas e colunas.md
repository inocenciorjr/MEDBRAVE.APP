-- WARNING: This schema is for context only and is not meant to be run.
-- Table order and constraints may not be valid for execution.

CREATE TABLE public.achievements (
  id text,
  userId text,
  achievementType text,
  title text,
  description text,
  iconUrl text,
  badgeLevel text,
  pointsAwarded numeric,
  unlockedAt jsonb,
  criteria jsonb,
  progress jsonb,
  isVisible boolean,
  category text,
  createdAt jsonb,
  updatedAt jsonb,
  firestore_id text NOT NULL,
  CONSTRAINT achievements_pkey PRIMARY KEY (firestore_id)
);
CREATE TABLE public.analytics (
  id text,
  userId text,
  eventType text,
  eventName text,
  eventData jsonb,
  sessionId text,
  deviceInfo jsonb,
  userAgent text,
  ipAddress text,
  location jsonb,
  timestamp jsonb,
  source text,
  medium text,
  campaign text,
  createdAt jsonb,
  firestore_id text NOT NULL,
  CONSTRAINT analytics_pkey PRIMARY KEY (firestore_id)
);
CREATE TABLE public.apiKeyUsageLogs (
  id text,
  apiKeyId text,
  endpoint text,
  method text,
  statusCode numeric,
  ipAddress text,
  userAgent text,
  timestamp jsonb,
  firestore_id text NOT NULL,
  CONSTRAINT apiKeyUsageLogs_pkey PRIMARY KEY (firestore_id)
);
CREATE TABLE public.apiKeys (
  id text,
  key text,
  prefix text,
  userId text,
  expiresAt text,
  ipRestrictions text,
  createdAt jsonb,
  name text,
  description text,
  scopes jsonb,
  lastUsedAt jsonb,
  usageCount numeric,
  revokedBy text,
  isActive boolean,
  revokedAt jsonb,
  revokedReason text,
  updatedAt jsonb,
  firestore_id text NOT NULL,
  CONSTRAINT apiKeys_pkey PRIMARY KEY (firestore_id)
);
CREATE TABLE public.appSettings (
  id text,
  settingKey text,
  settingValue jsonb,
  settingType text,
  category text,
  description text,
  isPublic boolean,
  isEditable boolean,
  validationRules jsonb,
  defaultValue jsonb,
  lastModifiedBy text,
  version numeric,
  createdAt jsonb,
  updatedAt jsonb,
  firestore_id text NOT NULL,
  CONSTRAINT appSettings_pkey PRIMARY KEY (firestore_id)
);
CREATE TABLE public.articles (
  id text,
  title text,
  content text,
  authorId text,
  authorName text,
  categoryId text,
  categoryName text,
  tags jsonb,
  status text,
  featuredImage text,
  viewCount numeric,
  likeCount numeric,
  commentCount numeric,
  publishedAt text,
  slug text,
  createdAt jsonb,
  updatedAt jsonb,
  firestore_id text NOT NULL,
  CONSTRAINT articles_pkey PRIMARY KEY (firestore_id)
);
CREATE TABLE public.auditLogs (
  id text,
  userId text,
  action text,
  resourceType text,
  resourceId text,
  oldValues jsonb,
  newValues jsonb,
  ipAddress text,
  userAgent text,
  sessionId text,
  timestamp jsonb,
  severity text,
  status text,
  errorMessage text,
  metadata jsonb,
  createdAt jsonb,
  firestore_id text NOT NULL,
  CONSTRAINT auditLogs_pkey PRIMARY KEY (firestore_id)
);
CREATE TABLE public.backups (
  id text,
  backupType text,
  fileName text,
  filePath text,
  fileSize numeric,
  compressionType text,
  checksum text,
  status text,
  startTime jsonb,
  endTime jsonb,
  duration numeric,
  errorMessage text,
  metadata jsonb,
  retentionPolicy jsonb,
  createdBy text,
  createdAt jsonb,
  updatedAt jsonb,
  firestore_id text NOT NULL,
  CONSTRAINT backups_pkey PRIMARY KEY (firestore_id)
);
CREATE TABLE public.cache (
  id text,
  key text,
  value jsonb,
  ttl numeric,
  expiresAt jsonb,
  createdAt jsonb,
  updatedAt jsonb,
  firestore_id text NOT NULL,
  CONSTRAINT cache_pkey PRIMARY KEY (firestore_id)
);
CREATE TABLE public.categories (
  id text NOT NULL,
  name text,
  description text,
  parentId text,
  isActive boolean DEFAULT true,
  displayOrder numeric,
  createdAt jsonb,
  updatedAt jsonb,
  firestore_id text,
  CONSTRAINT categories_pkey PRIMARY KEY (id)
);
CREATE TABLE public.collections (
  id text,
  name text,
  title text,
  description text,
  ownerId text,
  isPublic boolean,
  isOfficial boolean,
  category text,
  tags jsonb,
  deckIds jsonb,
  totalDecks numeric,
  totalCards numeric,
  difficulty text,
  language text,
  imageUrl text,
  thumbnailUrl text,
  viewCount numeric,
  downloadCount numeric,
  rating numeric,
  ratingCount numeric,
  createdAt jsonb,
  updatedAt jsonb,
  firestore_id text NOT NULL,
  deckCount numeric,
  cardCount numeric,
  userId text,
  CONSTRAINT collections_pkey PRIMARY KEY (firestore_id)
);
CREATE TABLE public.comments (
  id text NOT NULL,
  userId text,
  contentId text,
  contentType text,
  parentId text,
  content text,
  isApproved boolean DEFAULT false,
  isDeleted boolean DEFAULT false,
  likeCount numeric DEFAULT 0,
  replyCount numeric DEFAULT 0,
  createdAt jsonb,
  updatedAt jsonb,
  firestore_id text,
  CONSTRAINT comments_pkey PRIMARY KEY (id)
);
CREATE TABLE public.contentReports (
  id text NOT NULL,
  reporterId text,
  contentId text,
  contentType text,
  reportType text,
  reason text,
  description text,
  status text DEFAULT 'pending'::text,
  reviewedBy text,
  reviewedAt jsonb,
  actionTaken text,
  createdAt jsonb,
  updatedAt jsonb,
  firestore_id text,
  CONSTRAINT contentReports_pkey PRIMARY KEY (id)
);
CREATE TABLE public.decks (
  id text,
  name text,
  title text,
  description text,
  cardIds jsonb,
  userId text,
  collection text,
  isPublic boolean,
  createdAt jsonb,
  updatedAt jsonb,
  algorithm text,
  totalCards numeric,
  path text,
  source text,
  fsrsEnabled boolean,
  hierarchy jsonb,
  hierarchyPath text,
  tags jsonb,
  imageUrl text,
  flashcardCount numeric,
  firestore_id text NOT NULL,
  CONSTRAINT decks_pkey PRIMARY KEY (firestore_id)
);
CREATE TABLE public.deviceTokens (
  id text,
  userId text,
  token text,
  deviceType text,
  deviceId text,
  platform text,
  appVersion text,
  osVersion text,
  isActive boolean,
  lastUsed jsonb,
  registeredAt jsonb,
  metadata jsonb,
  createdAt jsonb,
  updatedAt jsonb,
  firestore_id text NOT NULL,
  CONSTRAINT deviceTokens_pkey PRIMARY KEY (firestore_id)
);
CREATE TABLE public.errorLogs (
  id text,
  userId text,
  errorType text,
  errorCode text,
  errorMessage text,
  stackTrace text,
  context jsonb,
  userAgent text,
  ipAddress text,
  url text,
  method text,
  statusCode numeric,
  severity text,
  environment text,
  version text,
  resolved boolean,
  resolvedBy text,
  resolvedAt jsonb,
  notes text,
  createdAt jsonb,
  firestore_id text NOT NULL,
  CONSTRAINT errorLogs_pkey PRIMARY KEY (firestore_id)
);
CREATE TABLE public.feedbacks (
  id text,
  userId text,
  type text,
  category text,
  title text,
  description text,
  rating numeric,
  priority text,
  status text,
  assignedTo text,
  response text,
  responseAt jsonb,
  attachments jsonb,
  metadata jsonb,
  deviceInfo jsonb,
  appVersion text,
  createdAt jsonb,
  updatedAt jsonb,
  firestore_id text NOT NULL,
  CONSTRAINT feedbacks_pkey PRIMARY KEY (firestore_id)
);
CREATE TABLE public.filters (
  id text,
  createdAt jsonb,
  category text,
  status text,
  filterType text,
  name text,
  isGlobal boolean,
  updatedAt jsonb,
  order numeric,
  isActive boolean,
  level numeric,
  children jsonb,
  firestore_id text NOT NULL,
  CONSTRAINT filters_pkey PRIMARY KEY (firestore_id)
);
CREATE TABLE public.flashcard_review_history (
  id uuid NOT NULL DEFAULT gen_random_uuid(),
  user_id text NOT NULL,
  flashcard_id text NOT NULL,
  grade integer NOT NULL CHECK (grade >= 0 AND grade <= 4),
  review_time_ms integer,
  stability numeric,
  difficulty numeric,
  elapsed_days numeric,
  scheduled_days numeric,
  reps integer,
  lapses integer,
  state integer NOT NULL,
  due timestamp with time zone NOT NULL,
  last_review timestamp with time zone,
  reviewed_at timestamp with time zone DEFAULT now(),
  CONSTRAINT flashcard_review_history_pkey PRIMARY KEY (id)
);
CREATE TABLE public.flashcard_search_index (
  id uuid NOT NULL DEFAULT gen_random_uuid(),
  userId text NOT NULL,
  deckId text NOT NULL,
  deckName text NOT NULL,
  deckDescription text,
  collectionName text,
  flashcardCount integer,
  hierarchy jsonb,
  hierarchyPath text,
  path text,
  searchableText text NOT NULL,
  createdAt timestamp with time zone DEFAULT now(),
  updatedAt timestamp with time zone DEFAULT now(),
  CONSTRAINT flashcard_search_index_pkey PRIMARY KEY (id)
);
CREATE TABLE public.flashcards (
  id text NOT NULL,
  deckId text,
  frontContent text,
  backContent text,
  question text,
  answer text,
  tags text,
  difficulty numeric,
  stability numeric,
  retrievability numeric,
  lastReview jsonb,
  nextReview jsonb,
  reviewCount numeric,
  lapseCount numeric,
  state numeric,
  createdAt jsonb,
  updatedAt jsonb,
  algorithm text,
  ankiData jsonb,
  firestore_id text,
  srsInterval numeric,
  srsRepetitions numeric,
  status text,
  srsEaseFactor numeric,
  srsLapses numeric,
  lastReviewedAt jsonb,
  nextReviewAt jsonb,
  CONSTRAINT flashcards_pkey PRIMARY KEY (id)
);
CREATE TABLE public.invitations (
  id text,
  inviterId text,
  inviteeEmail text,
  inviteeId text,
  invitationType text,
  status text,
  inviteCode text,
  expiresAt jsonb,
  acceptedAt jsonb,
  declinedAt jsonb,
  sentAt jsonb,
  remindersSent numeric,
  lastReminderAt jsonb,
  metadata jsonb,
  rewards jsonb,
  createdAt jsonb,
  updatedAt jsonb,
  firestore_id text NOT NULL,
  CONSTRAINT invitations_pkey PRIMARY KEY (firestore_id)
);
CREATE TABLE public.leaderboards (
  id text,
  userId text,
  leaderboardType text,
  category text,
  period text,
  score numeric,
  rank numeric,
  previousRank numeric,
  streak numeric,
  achievements jsonb,
  metadata jsonb,
  isActive boolean,
  lastUpdated jsonb,
  createdAt jsonb,
  firestore_id text NOT NULL,
  CONSTRAINT leaderboards_pkey PRIMARY KEY (firestore_id)
);
CREATE TABLE public.likes (
  id text NOT NULL,
  userId text,
  contentId text,
  contentType text,
  likeType text DEFAULT 'like'::text,
  createdAt jsonb,
  updatedAt jsonb,
  firestore_id text,
  CONSTRAINT likes_pkey PRIMARY KEY (id)
);
CREATE TABLE public.media (
  id text,
  fileName text,
  originalName text,
  mimeType text,
  fileSize numeric,
  width numeric,
  height numeric,
  duration numeric,
  url text,
  thumbnailUrl text,
  storageProvider text,
  storagePath text,
  uploadedBy text,
  isPublic boolean,
  tags jsonb,
  metadata jsonb,
  processedAt jsonb,
  createdAt jsonb,
  updatedAt jsonb,
  firestore_id text NOT NULL,
  CONSTRAINT media_pkey PRIMARY KEY (firestore_id)
);
CREATE TABLE public.mediaFiles (
  id text,
  filename text,
  mimeType text,
  size numeric,
  userId text,
  type text,
  originalFilename text,
  status text,
  isPublic boolean,
  url text,
  createdAt jsonb,
  updatedAt jsonb,
  firestore_id text NOT NULL,
  CONSTRAINT mediaFiles_pkey PRIMARY KEY (firestore_id)
);
CREATE TABLE public.mentorships (
  id text,
  mentorId text,
  studentId text,
  objectives text,
  notes text,
  meetingFrequency text,
  customFrequencyDays text,
  totalMeetings numeric,
  completedMeetings numeric,
  createdAt jsonb,
  nextMeetingDate jsonb,
  startDate jsonb,
  status text,
  updatedAt jsonb,
  firestore_id text NOT NULL,
  CONSTRAINT mentorships_pkey PRIMARY KEY (firestore_id)
);
CREATE TABLE public.notifications (
  id text,
  userId text,
  type text,
  title text,
  message text,
  priority text,
  relatedId text,
  relatedType text,
  isRead boolean,
  readAt jsonb,
  createdAt jsonb,
  updatedAt jsonb,
  firestore_id text NOT NULL,
  CONSTRAINT notifications_pkey PRIMARY KEY (firestore_id)
);
CREATE TABLE public.payments (
  id text NOT NULL,
  userId text,
  subscriptionId text,
  amount numeric,
  currency text DEFAULT 'USD'::text,
  paymentMethod text,
  paymentProvider text,
  transactionId text,
  status text,
  paymentDate jsonb,
  dueDate jsonb,
  paidAt jsonb,
  failedAt jsonb,
  failureReason text,
  metadata jsonb,
  createdAt jsonb,
  updatedAt jsonb,
  firestore_id text,
  CONSTRAINT payments_pkey PRIMARY KEY (id)
);
CREATE TABLE public.performance_metrics (
  operationType text,
  userId text,
  executionTimeMs numeric,
  documentsRead numeric,
  queryFilters jsonb,
  timestamp jsonb,
  firestore_id text NOT NULL,
  CONSTRAINT performance_metrics_pkey PRIMARY KEY (firestore_id)
);
CREATE TABLE public.plannerTasks (
  id text,
  userId text,
  type text,
  title text,
  description text,
  scheduledDate text,
  status text,
  priority text,
  createdAt text,
  updatedAt text,
  source text,
  manualType text,
  targetUrl text,
  firestore_id text NOT NULL,
  CONSTRAINT plannerTasks_pkey PRIMARY KEY (firestore_id)
);
CREATE TABLE public.plans (
  id text,
  name text,
  description text,
  price numeric,
  interval text,
  intervalCount numeric,
  trialDays numeric,
  features jsonb,
  isActive boolean,
  isPublic boolean,
  createdAt jsonb,
  updatedAt jsonb,
  durationDays numeric,
  currency text,
  displayOrder numeric,
  isPopular boolean,
  stripePriceId text,
  stripeProductId text,
  metadata jsonb,
  maxQuestions numeric,
  maxFlashcards numeric,
  maxSimulatedExams numeric,
  hasMentorship boolean,
  hasAdvancedAnalytics boolean,
  hasErrorNotebook boolean,
  firestore_id text NOT NULL,
  CONSTRAINT plans_pkey PRIMARY KEY (firestore_id)
);
CREATE TABLE public.programmedReviews (
  id text,
  userId text,
  contentId text,
  contentType text,
  deckId text,
  originalAnswerCorrect boolean,
  lastReviewedAt jsonb,
  nextReviewAt jsonb,
  intervalDays numeric,
  easeFactor numeric,
  repetitions numeric,
  lapses numeric,
  status text,
  notes text,
  createdAt jsonb,
  updatedAt jsonb,
  firestore_id text NOT NULL,
  CONSTRAINT programmedReviews_pkey PRIMARY KEY (firestore_id)
);
CREATE TABLE public.questionListFolders (
  color text,
  name text,
  description text,
  userId text,
  order numeric,
  status text,
  icon text,
  createdAt jsonb,
  listCount numeric,
  updatedAt jsonb,
  firestore_id text NOT NULL,
  CONSTRAINT questionListFolders_pkey PRIMARY KEY (firestore_id)
);
CREATE TABLE public.questionListItems (
  id text,
  questionListId text,
  questionId text,
  order numeric,
  personalNotes text,
  status text,
  isCompleted boolean,
  addedAt jsonb,
  lastAttemptedAt text,
  correctAttempts numeric,
  incorrectAttempts numeric,
  createdAt jsonb,
  updatedAt jsonb,
  firestore_id text NOT NULL,
  CONSTRAINT questionListItems_pkey PRIMARY KEY (firestore_id)
);
CREATE TABLE public.questionLists (
  id text,
  userId text,
  name text,
  title text,
  description text,
  isPublic boolean,
  tags jsonb,
  status text,
  viewCount numeric,
  favoriteCount numeric,
  lastStudyDate text,
  completionPercentage numeric,
  createdAt jsonb,
  questionCount numeric,
  lastAddedAt jsonb,
  updatedAt jsonb,
  folderId text,
  questions jsonb,
  firestore_id text NOT NULL,
  CONSTRAINT questionLists_pkey PRIMARY KEY (firestore_id)
);
CREATE TABLE public.questionResponses (
  id text,
  userId text,
  questionId text,
  questionListId text,
  selectedAlternativeId text,
  isCorrectOnFirstAttempt boolean,
  responseTimeSeconds numeric,
  reviewQuality numeric,
  easeFactor numeric,
  interval numeric,
  repetitions numeric,
  failStreak numeric,
  isLearning boolean,
  isLeech boolean,
  lastReviewQuality numeric,
  lastReviewedAt jsonb,
  nextReviewDate jsonb,
  answeredAt jsonb,
  createdAt jsonb,
  programmedReviewId text,
  updatedAt jsonb,
  selectedOptionId text,
  firestore_id text NOT NULL,
  CONSTRAINT questionResponses_pkey PRIMARY KEY (firestore_id)
);
CREATE TABLE public.questions (
  id text NOT NULL,
  deckId text,
  userId text,
  title text,
  content text,
  questionType text,
  options jsonb,
  correctAnswer text,
  explanation text,
  difficulty numeric,
  tags jsonb,
  isPublic boolean DEFAULT false,
  viewCount numeric DEFAULT 0,
  likeCount numeric DEFAULT 0,
  answerCount numeric DEFAULT 0,
  createdAt jsonb,
  updatedAt jsonb,
  firestore_id text,
  CONSTRAINT questions_pkey PRIMARY KEY (id)
);
CREATE TABLE public.rateLimitViolations (
  id text,
  key text,
  type text,
  count numeric,
  limit numeric,
  ipAddress text,
  userId text,
  endpoint text,
  apiKeyId text,
  timestamp jsonb,
  firestore_id text NOT NULL,
  CONSTRAINT rateLimitViolations_pkey PRIMARY KEY (firestore_id)
);
CREATE TABLE public.rateLimits (
  id text,
  key text,
  type text,
  resetAt jsonb,
  createdAt jsonb,
  count numeric,
  updatedAt jsonb,
  firestore_id text NOT NULL,
  CONSTRAINT rateLimits_pkey PRIMARY KEY (firestore_id)
);
CREATE TABLE public.reviews (
  id text NOT NULL,
  userId text,
  flashcardId text,
  deckId text,
  rating numeric,
  responseTime numeric,
  reviewType text,
  previousInterval numeric,
  newInterval numeric,
  easeFactor numeric,
  reviewDate jsonb,
  nextReviewDate jsonb,
  algorithmData jsonb,
  createdAt jsonb,
  updatedAt jsonb,
  firestore_id text,
  CONSTRAINT reviews_pkey PRIMARY KEY (id)
);
CREATE TABLE public.scheduledTasks (
  id text,
  name text,
  description text,
  type text,
  schedule jsonb,
  isActive boolean,
  createdBy text,
  nextRunAt jsonb,
  createdAt jsonb,
  updatedAt jsonb,
  parameters jsonb,
  lastRunAt jsonb,
  firestore_id text NOT NULL,
  CONSTRAINT scheduledTasks_pkey PRIMARY KEY (firestore_id)
);
CREATE TABLE public.sessions (
  id text,
  userId text,
  sessionToken text,
  refreshToken text,
  deviceId text,
  deviceType text,
  platform text,
  userAgent text,
  ipAddress text,
  location jsonb,
  isActive boolean,
  lastActivity jsonb,
  expiresAt jsonb,
  createdAt jsonb,
  updatedAt jsonb,
  firestore_id text NOT NULL,
  CONSTRAINT sessions_pkey PRIMARY KEY (firestore_id)
);
CREATE TABLE public.simulatedExamResults (
  id text,
  userId text,
  simulatedExamId text,
  userName text,
  simulatedExamTitle text,
  startedAt jsonb,
  timeTakenSeconds numeric,
  score text,
  totalQuestions numeric,
  correctCount numeric,
  incorrectCount numeric,
  answers jsonb,
  createdAt jsonb,
  completedAt jsonb,
  status text,
  updatedAt jsonb,
  startTime jsonb,
  totalTimeSpentSeconds numeric,
  answeredQuestions numeric,
  correctAnswers numeric,
  incorrectAnswers numeric,
  feedback text,
  skippedAnswers numeric,
  endTime jsonb,
  firestore_id text NOT NULL,
  CONSTRAINT simulatedExamResults_pkey PRIMARY KEY (firestore_id)
);
CREATE TABLE public.simulatedExams (
  id text,
  title text,
  description text,
  questionIds jsonb,
  questions jsonb,
  totalQuestions numeric,
  totalPoints numeric,
  difficulty text,
  filterIds jsonb,
  subFilterIds jsonb,
  status text,
  isPublic boolean,
  createdBy text,
  createdAt jsonb,
  updatedAt jsonb,
  tags jsonb,
  randomize boolean,
  userId text,
  creatorName text,
  questionCount numeric,
  timeLimitMinutes numeric,
  settings text,
  totalAttempts numeric,
  averageScore text,
  lastPublishedAt jsonb,
  firestore_id text NOT NULL,
  CONSTRAINT simulatedExams_pkey PRIMARY KEY (firestore_id)
);
CREATE TABLE public.studySessions (
  id text,
  userId text,
  deckId text,
  sessionType text,
  startTime jsonb,
  endTime jsonb,
  duration numeric,
  cardsStudied numeric,
  correctAnswers numeric,
  incorrectAnswers numeric,
  accuracy numeric,
  averageResponseTime numeric,
  sessionData jsonb,
  createdAt jsonb,
  updatedAt jsonb,
  firestore_id text NOT NULL,
  CONSTRAINT studySessions_pkey PRIMARY KEY (firestore_id)
);
CREATE TABLE public.subFilters (
  order numeric,
  createdAt jsonb,
  name text,
  isActive boolean,
  status text,
  id text,
  filterId text,
  updatedAt jsonb,
  parentId text,
  level numeric,
  firestore_id text NOT NULL,
  CONSTRAINT subFilters_pkey PRIMARY KEY (firestore_id)
);
CREATE TABLE public.subscriptions (
  id text NOT NULL,
  userId text,
  planId text,
  planName text,
  status text,
  currentPeriodStart jsonb,
  currentPeriodEnd jsonb,
  trialStart jsonb,
  trialEnd jsonb,
  canceledAt jsonb,
  cancelAtPeriodEnd boolean DEFAULT false,
  subscriptionProvider text,
  providerSubscriptionId text,
  providerCustomerId text,
  metadata jsonb,
  createdAt jsonb,
  updatedAt jsonb,
  firestore_id text,
  CONSTRAINT subscriptions_pkey PRIMARY KEY (id)
);
CREATE TABLE public.tags (
  id text,
  name text,
  slug text,
  description text,
  color text,
  icon text,
  category text,
  isSystem boolean,
  isActive boolean,
  usageCount numeric,
  parentId text,
  hierarchy jsonb,
  metadata jsonb,
  createdBy text,
  createdAt jsonb,
  updatedAt jsonb,
  firestore_id text NOT NULL,
  CONSTRAINT tags_pkey PRIMARY KEY (firestore_id)
);
CREATE TABLE public.taskExecutionLogs (
  id text,
  taskId text,
  taskName text,
  startedAt jsonb,
  result jsonb,
  metadata jsonb,
  duration numeric,
  completedAt jsonb,
  error text,
  status text,
  firestore_id text NOT NULL,
  CONSTRAINT taskExecutionLogs_pkey PRIMARY KEY (firestore_id)
);
CREATE TABLE public.templates (
  id text,
  name text,
  title text,
  description text,
  type text,
  category text,
  structure jsonb,
  fields jsonb,
  styling jsonb,
  isPublic boolean,
  isOfficial boolean,
  createdBy text,
  usageCount numeric,
  rating numeric,
  ratingCount numeric,
  tags jsonb,
  preview jsonb,
  version text,
  createdAt jsonb,
  updatedAt jsonb,
  firestore_id text NOT NULL,
  CONSTRAINT templates_pkey PRIMARY KEY (firestore_id)
);
CREATE TABLE public.test (
  firestore_id text NOT NULL,
  name text,
  value numeric,
  CONSTRAINT test_pkey PRIMARY KEY (firestore_id)
);
CREATE TABLE public.userAnswers (
  id text NOT NULL,
  userId text,
  questionId text,
  flashcardId text,
  deckId text,
  answer text,
  isCorrect boolean,
  responseTime numeric,
  attemptNumber numeric DEFAULT 1,
  sessionId text,
  answeredAt jsonb,
  createdAt jsonb,
  updatedAt jsonb,
  firestore_id text,
  CONSTRAINT userAnswers_pkey PRIMARY KEY (id)
);
CREATE TABLE public.userPlans (
  id text,
  userId text,
  planId text,
  startDate jsonb,
  endDate jsonb,
  status text,
  lastPaymentId text,
  paymentMethod text,
  autoRenew boolean,
  createdAt jsonb,
  updatedAt jsonb,
  metadata text,
  cancellationReason text,
  cancelledAt text,
  nextBillingDate text,
  trialEndsAt text,
  firestore_id text NOT NULL,
  CONSTRAINT userPlans_pkey PRIMARY KEY (firestore_id)
);
CREATE TABLE public.userProfiles (
  id text NOT NULL,
  userId text,
  firstName text,
  lastName text,
  dateOfBirth jsonb,
  phoneNumber text,
  address jsonb,
  profession text,
  institution text,
  specialization text,
  experienceLevel text,
  bio text,
  website text,
  socialLinks jsonb,
  profileVisibility text DEFAULT 'public'::text,
  emailNotifications boolean DEFAULT true,
  pushNotifications boolean DEFAULT true,
  studyReminders boolean DEFAULT true,
  weeklyReports boolean DEFAULT true,
  createdAt jsonb,
  updatedAt jsonb,
  firestore_id text,
  CONSTRAINT userProfiles_pkey PRIMARY KEY (id)
);
CREATE TABLE public.userStatistics (
  id text,
  userId text,
  totalQuestionsAnswered numeric,
  correctAnswers numeric,
  overallAccuracy numeric,
  studyTimeAnalysis jsonb,
  learningMetrics jsonb,
  streakData jsonb,
  examMetrics jsonb,
  filterStatistics jsonb,
  peerComparison jsonb,
  recommendations jsonb,
  currentSession text,
  lastCalculated jsonb,
  version text,
  createdAt jsonb,
  updatedAt jsonb,
  incorrectAnswers numeric,
  totalTime numeric,
  averageTime numeric,
  accuracyPerFilter jsonb,
  studyTimePerDay jsonb,
  strongestFilters jsonb,
  weakestFilters jsonb,
  improvementAreas jsonb,
  simulatedExamsTaken numeric,
  lastActivityDate jsonb,
  streakDays numeric,
  totalQuestions numeric,
  questionsPerDay jsonb,
  accuracyPerDay jsonb,
  lastStudyDate jsonb,
  lastActivityAt jsonb,
  accuracyPerDifficulty jsonb,
  firestore_id text NOT NULL,
  CONSTRAINT userStatistics_pkey PRIMARY KEY (firestore_id)
);
CREATE TABLE public.user_flashcard_interactions (
  id text NOT NULL,
  user_id text NOT NULL,
  flashcard_id text NOT NULL,
  review_quality numeric NOT NULL,
  study_time numeric,
  reviewed_at timestamp with time zone,
  created_at timestamp with time zone DEFAULT now(),
  updated_at timestamp with time zone,
  deck_id text,
  srs_interval numeric,
  srs_ease_factor numeric,
  srs_repetitions numeric,
  srs_lapses numeric,
  next_review_at timestamp with time zone,
  new_status text,
  previous_interval numeric,
  previous_ease_factor numeric,
  previous_status text,
  firestore_id text NOT NULL,
  CONSTRAINT user_flashcard_interactions_pkey PRIMARY KEY (firestore_id)
);
CREATE TABLE public.user_plans (
  id text,
  userId text,
  planId text,
  startedAt jsonb,
  endsAt jsonb,
  status text,
  paymentId text,
  paymentMethod text,
  autoRenew boolean,
  createdAt jsonb,
  updatedAt jsonb,
  metadata text,
  cancellationReason text,
  cancelledAt text,
  startDate jsonb,
  endDate jsonb,
  lastPaymentId text,
  nextBillingDate text,
  trialEndsAt text,
  cancelReason text,
  lastNotificationDate text,
  firestore_id text NOT NULL,
  CONSTRAINT user_plans_pkey PRIMARY KEY (firestore_id)
);
CREATE TABLE public.user_topic_performances (
  id text,
  userId text,
  subFilterId text,
  createdAt jsonb,
  totalTimeSpentSeconds numeric,
  lastAnsweredAt jsonb,
  totalQuestionsAnswered numeric,
  correctAnswers numeric,
  updatedAt jsonb,
  firestore_id text NOT NULL,
  CONSTRAINT user_topic_performances_pkey PRIMARY KEY (firestore_id)
);
CREATE TABLE public.users (
  email text,
  displayName text,
  photoURL text,
  role text,
  usernameSlug text,
  createdAt jsonb,
  lastLogin jsonb,
  masteredFlashcards numeric,
  totalDecks numeric,
  totalFlashcards numeric,
  activeFlashcards numeric,
  updatedAt jsonb,
  firestore_id text NOT NULL,
  id uuid DEFAULT gen_random_uuid(),
  CONSTRAINT users_pkey PRIMARY KEY (firestore_id)
);