 
import { SupabaseNotificationService } from '../notifications/supabase/SupabaseNotificationService';
import { SupabasePaymentNotificationService } from '../notifications/supabase/SupabasePaymentNotificationService';
import { NotificationController } from '../controllers/NotificationController';
import { PaymentNotificationController } from '../controllers/PaymentNotificationController';
import { createNotificationRoutes } from '../routes/notificationRoutes';
import { createPaymentNotificationRoutes } from '../routes/paymentNotificationRoutes';
import { Router } from 'express';

/**
 * Cria os serviços e controladores de notificações usando Supabase (recomendado)
 */
export const createNotificationModule = (): {
  notificationRoutes: Router;
  paymentNotificationRoutes: Router;
  notificationService: SupabaseNotificationService;
  paymentNotificationService: SupabasePaymentNotificationService;
} => {
  // Criar serviços Supabase
  const notificationService = new SupabaseNotificationService();
  const paymentNotificationService = new SupabasePaymentNotificationService();

  // Criar controladores
  const notificationController = new NotificationController(notificationService);
  const paymentNotificationController = new PaymentNotificationController(paymentNotificationService);

  // Criar rotas
  const notificationRoutes = createNotificationRoutes(notificationController);
  const paymentNotificationRoutes = createPaymentNotificationRoutes(paymentNotificationController);

  return {
    notificationRoutes,
    paymentNotificationRoutes,
    notificationService,
    paymentNotificationService,
  };
};

 
// Use createNotificationModule() for Supabase implementation
